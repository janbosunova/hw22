{"version":3,"sources":["components/Profile/ProfileForm.module.css","components/Layout/MainNavigation.module.css","components/Profile/UserProfile.module.css","components/StartingPage/StartingPageContent.module.css","store/authContext.js","components/Layout/MainNavigation.js","components/Layout/Layout.js","utils/constants/general.js","components/Profile/ProfileForm.js","components/Profile/UserProfile.js","components/Auth/AuthForm.js","pages/AuthPage.js","components/StartingPage/StartingPageContent.js","pages/HomePage.js","App.js","index.js","components/Auth/AuthForm.module.css"],"names":["module","exports","authContext","React","createContext","token","isLoggedIn","login","logout","AuthContextProvider","props","useState","setToken","useEffect","initialToken","localStorage","getItem","contextValue","setItem","removeItem","Provider","value","children","MainNavigation","authCtx","useContext","className","classes","header","to","logo","onClick","Layout","SECRET_KEY","ProfileForm","history","useHistory","newPasswordInputRef","useRef","form","onSubmit","event","preventDefault","enteredNewPassword","current","fetch","method","body","JSON","stringify","idToken","password","returnSecureToken","headers","then","response","ok","replace","catch","error","control","htmlFor","type","id","minLength","ref","action","UserProfile","profile","AuthForm","emailInputRef","passwordInputRef","isLogin","setIsLogin","isLoading","setIsLoading","auth","url","enteredEmail","enteredPassword","email","json","result","data","errorMessage","message","Error","err","alert","required","actions","toggle","prevState","AuthPage","StartingPageContent","starting","HomePage","App","path","exact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9d61f8ca.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ProfileForm_form__1aTlH\",\"control\":\"ProfileForm_control__14kQL\",\"action\":\"ProfileForm_action__1xhHo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"MainNavigation_header__2iGYr\",\"logo\":\"MainNavigation_logo__2UXRB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"UserProfile_profile__2dMm_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"starting\":\"StartingPageContent_starting__29Hu4\"};","import React from 'react';\r\nimport { useState } from 'react';\r\nimport { useEffect } from 'react';\r\n\r\nexport const authContext = React.createContext({\r\n  //   email: '',\r\n  token: '',\r\n  isLoggedIn: false,\r\n  login: (token) => {},\r\n  logout: () => {},\r\n});\r\n\r\nexport const AuthContextProvider = (props) => {\r\n  const [token, setToken] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const initialToken = localStorage.getItem('@token-onine-store');\r\n    setToken(initialToken);\r\n  }, []);\r\n\r\n  const userIsLoggedIn = !!token;\r\n\r\n  const loginHandler = (token) => {\r\n    setToken(token);\r\n    localStorage.setItem('@token-onine-store', token);\r\n  };\r\n\r\n  const logoutHandler = () => {\r\n    setToken(null);\r\n    localStorage.removeItem('@token-onine-store');\r\n  };\r\n\r\n  const contextValue = {\r\n    token: token,\r\n    isLoggedIn: userIsLoggedIn,\r\n    login: loginHandler,\r\n    logout: logoutHandler,\r\n  };\r\n\r\n  return <authContext.Provider value={contextValue}>{props.children}</authContext.Provider>;\r\n};\r\n","import { Link } from 'react-router-dom';\nimport { useContext } from 'react';\nimport { authContext } from '../../store/authContext';\n\nimport classes from './MainNavigation.module.css';\n\nconst MainNavigation = () => {\n  const authCtx = useContext(authContext);\n\n  const isLoggedIn = authCtx.isLoggedIn;\n\n  const logoutHandler = () => {\n    authCtx.logout();\n  };\n\n  return (\n    <header className={classes.header}>\n      <Link to=\"/\">\n        <div className={classes.logo}>React Auth</div>\n      </Link>\n      <nav>\n        <ul>\n          {!isLoggedIn && (\n            <li>\n              <Link to=\"/auth\">Login</Link>\n            </li>\n          )}\n          {isLoggedIn && (\n            <li>\n              <Link to=\"/profile\">Profile</Link>\n            </li>\n          )}\n          {isLoggedIn && (\n            <li>\n              <button onClick={logoutHandler}>Logout</button>\n            </li>\n          )}\n        </ul>\n      </nav>\n    </header>\n  );\n};\n\nexport default MainNavigation;\n","import { Fragment } from 'react';\n\nimport MainNavigation from './MainNavigation';\n\nconst Layout = (props) => {\n  return (\n    <Fragment>\n      <MainNavigation />\n      <main>{props.children}</main>\n    </Fragment>\n  );\n};\n\nexport default Layout;\n","export const SECRET_KEY = 'AIzaSyAzEqwVP_i0oTwFOtEY85BQS12fyp7HExU';\r\n","import { useRef } from 'react';\nimport { useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { authContext } from '../../store/authContext';\nimport { SECRET_KEY } from '../../utils/constants/general';\n\nimport classes from './ProfileForm.module.css';\n\nconst ProfileForm = () => {\n  const history = useHistory();\n  const authCtx = useContext(authContext);\n  const newPasswordInputRef = useRef();\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    const enteredNewPassword = newPasswordInputRef.current.value;\n\n    fetch(`https://identitytoolkit.googleapis.com/v1/accounts:update?key=${SECRET_KEY}`, {\n      method: 'POST',\n      body: JSON.stringify({\n        idToken: authCtx.token,\n        password: enteredNewPassword,\n        returnSecureToken: false,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((response) => {\n        if (response.ok) {\n          history.replace('/');\n        }\n      })\n      .catch((error) => {});\n  };\n\n  return (\n    <form className={classes.form} onSubmit={submitHandler}>\n      <div className={classes.control}>\n        <label htmlFor=\"new-password\">New Password</label>\n        <input type=\"password\" id=\"new-password\" minLength={7} ref={newPasswordInputRef} />\n      </div>\n      <div className={classes.action}>\n        <button>Change Password</button>\n      </div>\n    </form>\n  );\n};\n\nexport default ProfileForm;\n","import ProfileForm from './ProfileForm';\nimport classes from './UserProfile.module.css';\n\nconst UserProfile = () => {\n  return (\n    <section className={classes.profile}>\n      <h1>Your User Profile</h1>\n      <ProfileForm />\n    </section>\n  );\n};\n\nexport default UserProfile;\n","import { useState, useRef, useContext } from 'react';\nimport { SECRET_KEY } from '../../utils/constants/general';\nimport { authContext } from '../../store/authContext';\n\nimport classes from './AuthForm.module.css';\nimport { useHistory } from 'react-router-dom';\n\nconst AuthForm = () => {\n  const history = useHistory()\n  const authCtx = useContext(authContext);\n  const emailInputRef = useRef();\n  const passwordInputRef = useRef();\n\n  const [isLogin, setIsLogin] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n\n\n  const switchAuthModeHandler = () => {\n    setIsLogin((prevState) => !prevState);\n  };\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    const enteredEmail = emailInputRef.current.value;\n    const enteredPassword = passwordInputRef.current.value;\n\n    //TODO add validation\n\n    setIsLoading(true);\n    let url;\n    if (isLogin) {\n      url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${SECRET_KEY}`;\n\n      fetch(url, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\temail: enteredEmail,\n\t\t\t\t\tpassword: enteredPassword,\n\t\t\t\t\treturnSecureToken: true,\n\t\t\t\t}),\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\treturn response.json()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((result) => {\n\t\t\t\t\tauthCtx.login(result.idToken)\n\t\t\t\t\thistory.replace('/profile')\n\t\t\t\t})\n    } else {\n      url = `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${SECRET_KEY}`;\n      fetch(url, {\n        method: 'POST',\n        body: JSON.stringify({\n          email: enteredEmail,\n          password: enteredPassword,\n          returnSecureToken: true,\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n        .then((response) => {\n          setIsLoading(false);\n          if (response.ok) {\n            return response.json();\n          } else {\n            response.json().then((data) => {\n              let errorMessage = 'Authentication failed';\n              if (data && data.error && data.error.message) {\n                errorMessage = data.error.message;\n              }\n\n              throw new Error(errorMessage);\n            });\n          }\n        })\n        .then((data) => {\n          // console.log(data);\n          authCtx.login(data.idToken)\n          history.replace('/profile')\n        })\n        .catch((err) => {\n          alert(err.message);\n        });\n    }\n  };\n\n  return (\n    <section className={classes.auth}>\n      <h1>{isLogin ? 'Login' : 'Sign Up'}</h1>\n      <form onSubmit={submitHandler}>\n        <div className={classes.control}>\n          <label htmlFor=\"email\">Your Email</label>\n          <input ref={emailInputRef} type=\"email\" id=\"email\" required />\n        </div>\n        <div className={classes.control}>\n          <label htmlFor=\"password\">Your Password</label>\n          <input ref={passwordInputRef} type=\"password\" id=\"password\" required />\n        </div>\n        <div className={classes.actions}>\n          {!isLoading && <button>{isLogin ? 'Login' : 'Create Account'}</button>}\n          {isLoading && <p>Sending request...</p>}\n          <button type=\"button\" className={classes.toggle} onClick={switchAuthModeHandler}>\n            {isLogin ? 'Create new account' : 'Login with existing account'}\n          </button>\n        </div>\n      </form>\n    </section>\n  );\n};\n\nexport default AuthForm;\n","import AuthForm from '../components/Auth/AuthForm';\n\nconst AuthPage = () => {\n  return <AuthForm />;\n};\n\nexport default AuthPage;\n","import classes from './StartingPageContent.module.css';\n\nconst StartingPageContent = () => {\n  return (\n    <section className={classes.starting}>\n      <h1>Welcome on Board!</h1>\n    </section>\n  );\n};\n\nexport default StartingPageContent;\n","import StartingPageContent from '../components/StartingPage/StartingPageContent';\n\nconst HomePage = () => {\n  return <StartingPageContent />;\n};\n\nexport default HomePage;\n","import { Switch, Route } from 'react-router-dom';\nimport { useContext } from 'react';\n\nimport Layout from './components/Layout/Layout';\nimport UserProfile from './components/Profile/UserProfile';\nimport AuthPage from './pages/AuthPage';\nimport HomePage from './pages/HomePage';\nimport { authContext } from './store/authContext';\nimport { Redirect } from 'react-router-dom';\n\nfunction App() {\n  const authCtx = useContext(authContext);\n\n  return (\n    <Layout>\n      <Switch>\n        <Route path=\"/\" exact>\n          <HomePage />\n        </Route>\n        {!authCtx.isLoggedIn && (\n          <Route path=\"/auth\">\n            <AuthPage />\n          </Route>\n        )}\n        {authCtx.isLoggedIn && (\n          <Route path=\"/profile\">\n            <UserProfile />\n          </Route>\n        )}\n        <Route path=\"*\">\n          <Redirect to=\"/\" />\n        </Route>\n      </Switch>\n    </Layout>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { AuthContextProvider } from './store/authContext';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <AuthContextProvider>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </AuthContextProvider>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"AuthForm_auth__1B4Ex\",\"control\":\"AuthForm_control__3rgGX\",\"actions\":\"AuthForm_actions__1F5eE\",\"toggle\":\"AuthForm_toggle__3OBzl\"};"],"sourceRoot":""}